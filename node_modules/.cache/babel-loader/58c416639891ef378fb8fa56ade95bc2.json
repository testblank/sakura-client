{"ast":null,"code":"import _regeneratorRuntime from \"/Users/testblank/Documents/heurm-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/testblank/Documents/heurm-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/testblank/Documents/heurm-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/testblank/Documents/heurm-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/testblank/Documents/heurm-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/testblank/Documents/heurm-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/testblank/Documents/heurm-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/testblank/Documents/heurm-client/src/containers/Auth/Login.js\";\n\n(function () {\n  var enterModule = require('react-hot-loader').enterModule;\n\n  enterModule && enterModule(module);\n})();\n\nimport React, { Component } from \"react\";\nimport { AuthContent, InputWithLabel, AuthButton, RightAlignedLink, AuthError } from \"components/Auth\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport * as authActions from \"redux/modules/auth\";\nimport * as userActions from \"redux/modules/user\";\nimport storage from \"lib/storage\";\nimport queryString from \"query-string\";\n\nvar Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.handleChange = function (e) {\n      var AuthActions = _this.props.AuthActions;\n      var _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n      AuthActions.changeInput({\n        name: name,\n        value: value,\n        form: \"login\"\n      });\n    };\n\n    _this.setError = function (message) {\n      var AuthActions = _this.props.AuthActions;\n      AuthActions.setError({\n        form: \"login\",\n        message: message\n      });\n      return false;\n    };\n\n    _this.handleLocalLogin =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _this$props, form, AuthActions, UserActions, history, _form$toJS, email, password, loggedInfo;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props = _this.props, form = _this$props.form, AuthActions = _this$props.AuthActions, UserActions = _this$props.UserActions, history = _this$props.history;\n              _form$toJS = form.toJS(), email = _form$toJS.email, password = _form$toJS.password;\n              _context.prev = 2;\n              _context.next = 5;\n              return AuthActions.localLogin({\n                email: email,\n                password: password\n              });\n\n            case 5:\n              loggedInfo = _this.props.result.toJS();\n              UserActions.setLoggedInfo(loggedInfo);\n              history.push(\"/\");\n              storage.set(\"loggedInfo\", loggedInfo);\n              _context.next = 15;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](2);\n              console.log(_context.t0);\n\n              _this.setError(\"invalied user\");\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 11]]);\n    }));\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var location = this.props.location;\n      var query = queryString.parse(location.search);\n\n      if (query.expired !== undefined) {\n        this.setError(\"session has expired, please logIn\");\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var AuthActions = this.props.AuthActions;\n      AuthActions.initializeForm(\"login\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$form$toJS = this.props.form.toJS(),\n          email = _this$props$form$toJS.email,\n          password = _this$props$form$toJS.password;\n\n      var handleChange = this.handleChange,\n          handleLocalLogin = this.handleLocalLogin;\n      var error = this.props.error;\n      return React.createElement(AuthContent, {\n        title: \"logIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(InputWithLabel, {\n        onChange: handleChange,\n        value: email,\n        label: \"email\",\n        name: \"email\",\n        placeholder: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }), React.createElement(InputWithLabel, {\n        onChange: handleChange,\n        value: password,\n        label: \"password\",\n        name: \"password\",\n        placeholder: \"password\",\n        type: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), error && React.createElement(AuthError, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, error), React.createElement(RightAlignedLink, {\n        to: \"/auth/register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"signIn\"), React.createElement(AuthButton, {\n        onClick: handleLocalLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"logIn\"));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nvar _default = connect(function (state) {\n  return {\n    form: state.auth.getIn([\"login\", \"form\"]),\n    error: state.auth.getIn([\"login\", \"error\"]),\n    result: state.auth.get(\"result\")\n  };\n}, function (dispatch) {\n  return {\n    AuthActions: bindActionCreators(authActions, dispatch),\n    UserActions: bindActionCreators(userActions, dispatch)\n  };\n})(Login);\n\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = require('react-hot-loader').default;\n\n  var leaveModule = require('react-hot-loader').leaveModule;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(Login, \"Login\", \"/Users/testblank/Documents/heurm-client/src/containers/Auth/Login.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/testblank/Documents/heurm-client/src/containers/Auth/Login.js\");\n  leaveModule(module);\n})();\n\n;","map":{"version":3,"sources":["/Users/testblank/Documents/heurm-client/src/containers/Auth/Login.js"],"names":["React","Component","AuthContent","InputWithLabel","AuthButton","RightAlignedLink","AuthError","bindActionCreators","connect","authActions","userActions","storage","queryString","Login","handleChange","e","AuthActions","props","target","name","value","changeInput","form","setError","message","handleLocalLogin","UserActions","history","toJS","email","password","localLogin","loggedInfo","result","setLoggedInfo","push","set","console","log","location","query","parse","search","expired","undefined","initializeForm","error","state","auth","getIn","get","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  AuthContent,\n  InputWithLabel,\n  AuthButton,\n  RightAlignedLink,\n  AuthError\n} from \"components/Auth\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport * as authActions from \"redux/modules/auth\";\nimport * as userActions from \"redux/modules/user\";\nimport storage from \"lib/storage\";\nimport queryString from \"query-string\";\n\nclass Login extends Component {\n  componentDidMount() {\n    const { location } = this.props;\n    const query = queryString.parse(location.search);\n\n    if (query.expired !== undefined) {\n      this.setError(\"session has expired, please logIn\");\n    }\n  }\n\n  handleChange = e => {\n    const { AuthActions } = this.props;\n    const { name, value } = e.target;\n\n    AuthActions.changeInput({\n      name,\n      value,\n      form: \"login\"\n    });\n  };\n  componentWillUnmount() {\n    const { AuthActions } = this.props;\n    AuthActions.initializeForm(\"login\");\n  }\n  setError = message => {\n    const { AuthActions } = this.props;\n    AuthActions.setError({\n      form: \"login\",\n      message\n    });\n    return false;\n  };\n  handleLocalLogin = async () => {\n    const { form, AuthActions, UserActions, history } = this.props;\n    const { email, password } = form.toJS();\n\n    try {\n      await AuthActions.localLogin({ email, password });\n      const loggedInfo = this.props.result.toJS();\n\n      UserActions.setLoggedInfo(loggedInfo);\n      history.push(\"/\");\n      storage.set(\"loggedInfo\", loggedInfo);\n    } catch (error) {\n      console.log(error);\n      this.setError(\"invalied user\");\n    }\n  };\n\n  render() {\n    const { email, password } = this.props.form.toJS();\n    const { handleChange, handleLocalLogin } = this;\n    const { error } = this.props;\n    return (\n      <AuthContent title=\"logIn\">\n        <InputWithLabel\n          onChange={handleChange}\n          value={email}\n          label=\"email\"\n          name=\"email\"\n          placeholder=\"email\"\n        />\n        <InputWithLabel\n          onChange={handleChange}\n          value={password}\n          label=\"password\"\n          name=\"password\"\n          placeholder=\"password\"\n          type=\"password\"\n        />\n        {error && <AuthError>{error}</AuthError>}\n        <RightAlignedLink to=\"/auth/register\">signIn</RightAlignedLink>\n        <AuthButton onClick={handleLocalLogin}>logIn</AuthButton>\n      </AuthContent>\n    );\n  }\n}\n\nexport default connect(\n  state => ({\n    form: state.auth.getIn([\"login\", \"form\"]),\n    error: state.auth.getIn([\"login\", \"error\"]),\n    result: state.auth.get(\"result\")\n  }),\n  dispatch => ({\n    AuthActions: bindActionCreators(authActions, dispatch),\n    UserActions: bindActionCreators(userActions, dispatch)\n  })\n)(Login);\n"]},"metadata":{},"sourceType":"module"}